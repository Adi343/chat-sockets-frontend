{"ast":null,"code":"var _jsxFileName = \"/Users/adithyapantangi/Projects/chat-sockets/frontend/src/ChatWindow.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst webSocketUrl = process.env.REACT_APP_API;\nexport default function ChatWindow() {\n  _s();\n\n  const [chatData, setChatData] = useState([]);\n  const [chat, setChat] = useState(\"\");\n  const inputRef = useRef(null);\n  const scrollRef = useRef(null);\n\n  const submitChat = e => {\n    let chatMessage = e.target.value;\n\n    if (e.key === \"Enter\") {\n      inputRef.current.value = \"\";\n      inputRef.current.focus();\n      setChat(chatMessage);\n      const message = {\n        user: \"Me\",\n        message: chatMessage\n      };\n      console.log(`submitChat called! ${JSON.stringify(message)}`);\n      setChatData(arr => [...arr, message]);\n      setChat(\"\");\n    }\n  };\n\n  useEffect(() => {\n    if (webSocketUrl) {\n      const webSocket = new WebSocket(webSocketUrl); // webSocket.addEventListener(\"open\", function (event) {\n      //   webSocket.send(\"Hello from React!\");\n      // });\n\n      webSocket.addEventListener(\"message\", function (event) {\n        const data = JSON.parse(event.data);\n        setChatData(arr => [...arr, data]);\n        scrollRef.current.scrollIntoView({\n          behavior: \"smooth\"\n        });\n      });\n    }\n\n    return () => {\n      console.log(`webSocketUrl is ${webSocketUrl}`);\n\n      if (webSocketUrl !== undefined) {\n        webSocket.close();\n      }\n    };\n  }, [chat]);\n  useEffect(() => {\n    scrollRef.current.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [chatData]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      minHeight: \"100%\",\n      maxHeight: \"100%\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      // justifyItems: \"flex-end\",\n      border: \"5px #89c2d9\",\n      borderRadius: \"10px\",\n      backgroundColor: \"#a9d6e5\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"grid\",\n        alignContent: \"center\",\n        justifyContent: \"center\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Adithya's Chat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: \"9.75\",\n        overflow: \"auto\",\n        backgroundColor: \"#012a4a\",\n        border: \"1px #89c2d9\",\n        borderRadius: \"10px\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          flexDirection: \"column\",\n          backgroundColor: \"#232132\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            minHeight: \"100vh\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), chatData.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            margin: \"5px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"userStyle\",\n            children: item.user\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"messageStyle\",\n            children: item.message\n          }, item.user, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 15\n          }, this)]\n        }, item.message, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: scrollRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Type Message\",\n        className: \"chatBar\",\n        ref: inputRef,\n        onKeyDown: submitChat\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ChatWindow, \"OVs679HjsZPgmpzU9HXCD5K+Rxc=\");\n\n_c = ChatWindow;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChatWindow\");","map":{"version":3,"names":["React","useEffect","useState","useRef","webSocketUrl","process","env","REACT_APP_API","ChatWindow","chatData","setChatData","chat","setChat","inputRef","scrollRef","submitChat","e","chatMessage","target","value","key","current","focus","message","user","console","log","JSON","stringify","arr","webSocket","WebSocket","addEventListener","event","data","parse","scrollIntoView","behavior","undefined","close","minHeight","maxHeight","display","flexDirection","border","borderRadius","backgroundColor","alignContent","justifyContent","flex","overflow","map","item","margin"],"sources":["/Users/adithyapantangi/Projects/chat-sockets/frontend/src/ChatWindow.jsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\n\nconst webSocketUrl = process.env.REACT_APP_API;\n\nexport default function ChatWindow() {\n  const [chatData, setChatData] = useState([]);\n  const [chat, setChat] = useState(\"\");\n  const inputRef = useRef(null);\n  const scrollRef = useRef(null);\n\n  const submitChat = (e) => {\n    let chatMessage = e.target.value;\n    if (e.key === \"Enter\") {\n      inputRef.current.value = \"\";\n      inputRef.current.focus();\n      setChat(chatMessage);\n      const message = {\n        user: \"Me\",\n        message: chatMessage,\n      };\n      console.log(`submitChat called! ${JSON.stringify(message)}`);\n      setChatData((arr) => [...arr, message]);\n      setChat(\"\");\n    }\n  };\n  useEffect(() => {\n    if (webSocketUrl) {\n      const webSocket = new WebSocket(webSocketUrl);\n\n      // webSocket.addEventListener(\"open\", function (event) {\n      //   webSocket.send(\"Hello from React!\");\n      // });\n\n      webSocket.addEventListener(\"message\", function (event) {\n        const data = JSON.parse(event.data);\n        setChatData((arr) => [...arr, data]);\n        scrollRef.current.scrollIntoView({ behavior: \"smooth\" });\n      });\n    }\n\n    return () => {\n      console.log(`webSocketUrl is ${webSocketUrl}`);\n      if (webSocketUrl !== undefined) {\n        webSocket.close();\n      }\n    };\n  }, [chat]);\n\n  useEffect(() => {\n    scrollRef.current.scrollIntoView({ behavior: \"smooth\" });\n  }, [chatData]);\n\n  return (\n    <div\n      style={{\n        minHeight: \"100%\",\n        maxHeight: \"100%\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        // justifyItems: \"flex-end\",\n        border: \"5px #89c2d9\",\n        borderRadius: \"10px\",\n        backgroundColor: \"#a9d6e5\",\n      }}\n    >\n      <div\n        style={{\n          display: \"grid\",\n          alignContent: \"center\",\n          justifyContent: \"center\",\n        }}\n      >\n        <h3>Adithya's Chat</h3>\n      </div>\n      <div\n        style={{\n          flex: \"9.75\",\n          overflow: \"auto\",\n          backgroundColor: \"#012a4a\",\n          border: \"1px #89c2d9\",\n          borderRadius: \"10px\",\n        }}\n      >\n        <div\n          style={{\n            display: \"flex\",\n            flexDirection: \"column\",\n            backgroundColor: \"#232132\",\n          }}\n        >\n          <div\n            style={{\n              minHeight: \"100vh\",\n            }}\n          />\n          {chatData.map((item) => (\n            <div\n              key={item.message}\n              style={{\n                margin: \"5px\",\n              }}\n            >\n              <span className=\"userStyle\">{item.user}</span>\n              <span key={item.user} className=\"messageStyle\">\n                {item.message}\n              </span>\n            </div>\n          ))}\n          <div ref={scrollRef} />\n        </div>\n      </div>\n      <div className=\"chat\">\n        <input\n          type=\"text\"\n          placeholder=\"Type Message\"\n          className=\"chatBar\"\n          ref={inputRef}\n          onKeyDown={submitChat}\n        />\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}